# --------------------------------------------------
# Media Bitwarden-backed secrets
# --------------------------------------------------

## Shared credentials for Arr workloads
apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
  name: secrets
  namespace: media
  labels:
    app.kubernetes.io/name: bitwardensecret
    app.kubernetes.io/instance: media
    app.kubernetes.io/part-of: sm-operator
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: sm-operator
spec:
  organizationId: "${bitwarden_secrets_org_id}"
  secretName: media-secrets
  onlyMappedSecrets: true
  map:
    # Sonarr API key (Servarr env: SONARR__AUTH__APIKEY)
    - bwSecretId: "91ecdbba-d7dc-4b9b-8d79-b3840034d1d0"
      secretKeyName: "SONARR_API_KEY"
    # Radarr API key (Servarr env: RADARR__AUTH__APIKEY)
    - bwSecretId: "c8a5c100-3c5a-4391-a818-b3840034e6f9"
      secretKeyName: "RADARR_API_KEY"
    # Lidarr API key (Servarr env: LIDARR__AUTH__APIKEY)
    - bwSecretId: "89e0b939-bef8-43c3-bee8-b3840034f8a4"
      secretKeyName: "LIDARR_API_KEY"
    # Readarr API key (Servarr env: READARR__AUTH__APIKEY)
    - bwSecretId: "1f92d688-ab52-45a2-b563-b38400350e3b"
      secretKeyName: "READARR_API_KEY"
  authToken:
    secretName: bw-auth-token
    secretKey: token
