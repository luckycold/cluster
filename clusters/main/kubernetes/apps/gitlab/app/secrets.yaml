apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
    name: gitlab-secrets
    namespace: gitlab
    labels:
        app.kubernetes.io/name: bitwardensecret
        app.kubernetes.io/instance: gitlab
        app.kubernetes.io/part-of: sm-operator
        app.kubernetes.io/managed-by: kustomize
        app.kubernetes.io/created-by: sm-operator
spec:
    organizationId: "${bitwarden_secrets_org_id}"
    secretName: gitlab-secrets
    onlyMappedSecrets: true
    map:
        - bwSecretId: "81a9aeec-95b4-4bbf-964e-b37b002c073c"
          secretKeyName: "GITLAB_ROOT_PASSWORD"
        - # TODO: Bitwarden item ID for the Authelia OAuth client ID (value should be the client identifier)
          bwSecretId: "REPLACE_WITH_GITLAB_AUTHELIA_CLIENT_ID"
          secretKeyName: "AUTHELIA_CLIENT_ID"
        - # TODO: Bitwarden item ID for the Authelia OAuth client secret
          bwSecretId: "REPLACE_WITH_GITLAB_AUTHELIA_CLIENT_SECRET"
          secretKeyName: "AUTHELIA_CLIENT_SECRET"
    authToken:
        secretName: bw-auth-token
        secretKey: token
