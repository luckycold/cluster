apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
  name: example-app-secrets
  namespace: default
  labels:
    app.kubernetes.io/name: bitwardensecret
    app.kubernetes.io/instance: example-app
    app.kubernetes.io/part-of: sm-operator
spec:
  # Replace with your actual Bitwarden organization ID
  organizationId: "${bitwarden_secrets_org_id}"

  # Name of the Kubernetes secret to create
  secretName: example-app-bitwarden-secrets

  # Only sync mapped secrets (recommended)
  onlyMappedSecrets: true

  # Map Bitwarden secret IDs to Kubernetes secret keys
  map:
    - bwSecretId: "133ad137-c7c1-48be-a5ec-b37300fe1226"
      secretKeyName: "OPENAI_API_KEY"

  # Reference to the auth token secret
  authToken:
    secretName: bw-auth-token
    secretKey: token
