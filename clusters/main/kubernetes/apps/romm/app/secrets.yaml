apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
  name: romm-secrets
  namespace: romm
  labels:
    app.kubernetes.io/name: bitwardensecret
    app.kubernetes.io/instance: romm
    app.kubernetes.io/part-of: sm-operator
spec:
  # Replace with your actual Bitwarden organization ID
  organizationId: "${bitwarden_secrets_org_id}"

  # Name of the Kubernetes secret to create
  secretName: romm-bitwarden-secrets

  # Only sync mapped secrets (recommended)
  onlyMappedSecrets: true

  # Map Bitwarden secret IDs to Kubernetes secret keys
  map:
    - bwSecretId: "ae3a6b37-311d-48fb-a17d-b3760046a886"
      secretKeyName: "IGDB_CLIENT_ID"
    - bwSecretId: "4f7cacc4-26d1-4f4c-bdea-b3760047436b"
      secretKeyName: "IGDB_CLIENT_SECRET"
    - bwSecretId: "f9d5d01a-1a72-4152-af8c-b3760047aa99"
      secretKeyName: "MARIADB_PASSWORD"
    - bwSecretId: "d6f7852f-c793-4030-abcc-b3760047cacf"
      secretKeyName: "MARIADB_ROOT_PASSWORD"
    - bwSecretId: "16e30a9d-945b-42e0-a9c4-b3760047f7b3"
      secretKeyName: "OAUTH_CLIENT_SECRET"
    - bwSecretId: "a99b4a33-8063-495f-85ad-b376004780c7"
      secretKeyName: "REDIS_PASSWORD"
    - bwSecretId: "2e1ff5b4-8a04-4f45-8ece-b37600476220"
      secretKeyName: "STEAMGRIDDB_API_KEY"

  # Reference to the auth token secret
  authToken:
    secretName: bw-auth-token
    secretKey: token
