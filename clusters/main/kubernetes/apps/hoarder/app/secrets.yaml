apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
    name: hoarder-secrets
    namespace: hoarder
    labels:
        app.kubernetes.io/name: bitwardensecret
        app.kubernetes.io/instance: hoarder
        app.kubernetes.io/part-of: sm-operator
        app.kubernetes.io/managed-by: kustomize
        app.kubernetes.io/created-by: sm-operator
spec:
    # Replace with your actual Bitwarden organization ID
    organizationId: "${bitwarden_secrets_org_id}"

    # Name of the Kubernetes secret to create
    secretName: hoarder-secrets

    # Only sync mapped secrets (recommended)
    onlyMappedSecrets: true

    # Map Bitwarden secret IDs to Kubernetes secret keys
    map:
        - bwSecretId: "68fcc11f-2a35-4690-b615-b37700408480"
          secretKeyName: "NEXTAUTH_SECRET"
        - bwSecretId: "49cf6cde-7431-448e-8d81-b3770040ac4f"
          secretKeyName: "MEILI_MASTER_KEY"
        - bwSecretId: "2c1a18d8-fdf3-4d03-a82f-b3770040c7fb"
          secretKeyName: "NEXT_PUBLIC_SECRET"
        - bwSecretId: "133ad137-c7c1-48be-a5ec-b37300fe1226"
          secretKeyName: "OPENAI_API_KEY"
        - bwSecretId: "99c09ee8-b9be-4b7c-ba30-b3770040fb12"
          secretKeyName: "OAUTH_CLIENT_SECRET"

    # Reference to the auth token secret
    authToken:
        secretName: bw-auth-token
        secretKey: token
